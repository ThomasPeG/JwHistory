<div class="page-container">
  <div class="card-container">
    <div class="header-section">
      <h1>Estudios</h1>
      <button pButton (click)="showDialog()" label="Nuevo Estudio" icon="pi pi-plus"></button>
    </div>
    <p-table [value]="estudios" [paginator]="true" [rows]="10" class="custom-table">
      <ng-template pTemplate="header">
        <tr>
          <th>Fecha</th>
          <th>Duración</th>
          <th>Publicación</th>
          <th>Tema Estudiado</th>
          <th>Próximo Tema</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-estudio>
        <tr>
          <td>{{estudio.fecha | date:'dd/MM/yyyy'}}</td>
          <td>{{estudio.duracion}} minutos</td>
          <td>{{estudio.publicacion}}</td>
          <td>{{estudio.temaEstudiado}}</td>
          <td>{{estudio.proximoTema}}</td>
        </tr>
      </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="5" class="text-center">No hay estudios registrados</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<p-dialog [(visible)]="displayDialog" [modal]="true" class="custom-dialog">
  <form [formGroup]="form" class="form-grid">
    <div class="field col-12 md:col-6">
      <label for="fecha">Fecha</label>
      <p-calendar id="fecha" formControlName="fecha" [showIcon]="true"></p-calendar>
      <small class="p-error" *ngIf="form.get('fecha')?.invalid && form.get('fecha')?.touched">
        La fecha es requerida
      </small>
    </div>

    <div class="field col-12 md:col-6">
      <label for="duracion">Duración (minutos)</label>
      <p-inputNumber id="duracion" formControlName="duracion" [min]="1" placeholder="Ingrese la duración"></p-inputNumber>
      <small class="p-error" *ngIf="form.get('duracion')?.invalid && form.get('duracion')?.touched">
        La duración es requerida y debe ser mayor a 0
      </small>
    </div>

    <div class="field col-12">
      <label for="publicacion">Publicación</label>
      <input id="publicacion" type="text" pInputText formControlName="publicacion" placeholder="Nombre de la publicación">
      <small class="p-error" *ngIf="form.get('publicacion')?.invalid && form.get('publicacion')?.touched">
        La publicación es requerida
      </small>
    </div>

    <div class="field col-12">
      <label for="temaEstudiado">Tema Estudiado</label>
      <textarea id="temaEstudiado" pInputTextarea formControlName="temaEstudiado" rows="3" placeholder="Describa el tema estudiado"></textarea>
      <small class="p-error" *ngIf="form.get('temaEstudiado')?.invalid && form.get('temaEstudiado')?.touched">
        El tema estudiado es requerido
      </small>
    </div>

    <div class="field col-12">
      <label for="proximoTema">Próximo Tema</label>
      <textarea id="proximoTema" pInputTextarea formControlName="proximoTema" rows="3" placeholder="Describa el tema para la próxima sesión"></textarea>
      <small class="p-error" *ngIf="form.get('proximoTema')?.invalid && form.get('proximoTema')?.touched">
        El próximo tema es requerido
      </small>
    </div>

    <div class="field col-12">
      <label for="observaciones">Observaciones</label>
      <textarea id="observaciones" pInputTextarea formControlName="observaciones" rows="3" placeholder="Ingrese observaciones adicionales"></textarea>
    </div>

    <div class="field col-12">
      <label for="preguntaPendiente">Pregunta Pendiente</label>
      <textarea id="preguntaPendiente" pInputTextarea formControlName="preguntaPendiente" rows="3" placeholder="Ingrese preguntas pendientes"></textarea>
    </div>
  </form>
</p-dialog>

<p-toast></p-toast>