<div class="primera-visita-container animate-in">
  <div class="form-header">
    <h1>Primera Visita</h1>
    <p>Registra los detalles de tu primera visita</p>
  </div>
  
  <form [formGroup]="visitaForm" (ngSubmit)="onSubmit()" class="visita-form">
    <div class="form-grid">
      <!-- Nombres y Fecha en la primera fila -->
      <mat-form-field appearance="outline">
        <mat-label>Nombres</mat-label>
        <input matInput formControlName="nombres" placeholder="Ingrese los nombres" required>
        <mat-error *ngIf="visitaForm.get('nombres')?.hasError('required')">
          Este campo es requerido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Fecha</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="fecha" required>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
        <mat-error *ngIf="visitaForm.get('fecha')?.hasError('required')">
          Este campo es requerido
        </mat-error>
      </mat-form-field>

       <!-- Duración y Pregunta Pendiente en la última fila -->
       <mat-form-field appearance="outline">
        <mat-label>Duración (minutos)</mat-label>
        <input matInput type="number" formControlName="duracion" placeholder="Ingrese la duración" required>
        <mat-error *ngIf="visitaForm.get('duracion')?.hasError('required')">
          Este campo es requerido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Tipo de Persona</mat-label>
        <mat-select formControlName="tipoPersona" required>
          <mat-option value="ateo">Ateo</mat-option>
          <mat-option value="cristiano">Cristiano</mat-option>
          <mat-option value="catolico">Católico</mat-option>
        </mat-select>
        <mat-error *ngIf="visitaForm.get('tipoPersona')?.hasError('required')">
          Este campo es requerido
        </mat-error>
      </mat-form-field>

      <!-- Campos que ocupan todo el ancho -->
      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Pregunta Inicial</mat-label>
        <textarea matInput formControlName="preguntaInicial" placeholder="Ingrese la pregunta inicial" required></textarea>
        <mat-error *ngIf="visitaForm.get('preguntaInicial')?.hasError('required')">
          Este campo es requerido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Inquietud AMO</mat-label>
        <textarea matInput formControlName="inquietudAmo" placeholder="Ingrese la inquietud AMO"></textarea>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Datos Personales</mat-label>
        <textarea matInput formControlName="datosPersonales" placeholder="Ingrese datos personales adicionales"></textarea>
      </mat-form-field>

       <!-- Dirección y Tipo de Persona en la segunda fila -->
       <mat-form-field appearance="outline">
        <mat-label>Dirección</mat-label>
        <textarea matInput formControlName="direccion" placeholder="Ingrese la dirección" required></textarea>
        <mat-error *ngIf="visitaForm.get('direccion')?.hasError('required')">
          Este campo es requerido
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Pregunta Pendiente</mat-label>
        <textarea matInput formControlName="preguntaPendiente" placeholder="Ingrese la pregunta pendiente"></textarea>
      </mat-form-field>
    </div>

    <div class="button-container">
      <button mat-button type="button" (click)="onCancel()">Cancelar</button>
      <button mat-raised-button color="primary" type="submit" [disabled]="!visitaForm.valid">Guardar</button>
    </div>
  </form>
</div>